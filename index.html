<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
		<title>book</title>
		<style>
			body { margin: 0; }
		</style>
    </head>
    <body>
        <canvas id = "c"></canvas>
    </body>
    <script type = "module">
        import * as THREE from 'https://unpkg.com/three@0.126.1/build/three.module.js'; 
        //import { FirstPersonControls } from 'https://unpkg.com/three@0.126.1/examples/jsm/controls/FirstPersonControls.js';
        //import { OrbitControls } from 'https://unpkg.com/three@0.126.1/examples/jsm/controls/OrbitControls.js';

        let renderer;
        let scene;
        let camera;
        let cameraControl;

        class CameraControl{
            constructor(camera, x, y, z){
                this.camera = camera;
                this.x = x;
                this.y = y;
                this.z = z;
            }

            update(){
                this.camera.position.set(this.x, this.y, this.z);
            }
        }

        function addKeyboardHandlers(){
            window.addEventListener("keydown", function(){
                var keyCode = event.keyCode;
                switch (keyCode) {
                    case 68: //d
                    console.log("d");
                    break;
                    case 83: //s
                    console.log("s");
                    break;
                    case 65: //a
                    console.log("a");
                    break;
                    case 87: //w
                    console.log("w");
                    break;
                }
            }, false);
        }

        //resize drawingbuffer size (canvas internal resolution)
        function resizeRendererToDisplaySize(renderer) {
                const canvas = renderer.domElement;
                const width = canvas.clientWidth;
                const height = canvas.clientHeight;
                const needResize = canvas.width !== width || canvas.height !== height;

                if (needResize) {
                    renderer.setSize(width, height, false);
                }
                return needResize;
        }

        function animate(time) {
                time *= 0.001;  // convert time to seconds

                if(resizeRendererToDisplaySize(renderer)){
                    console.log("update drawingbuffer size");
                    const canvas = renderer.domElement;
                    camera.aspect = canvas.clientWidth / canvas.clientHeight;
                    camera.updateProjectionMatrix();
                }

                cameraControl.update();
                
                renderer.render(scene, camera);
                
                requestAnimationFrame(animate);
        }

        function main(){
            scene = new THREE.Scene();
            scene.background = new THREE.Color('lightgrey');

            camera = new THREE.PerspectiveCamera(75, 2, 0.1, 100);
            camera.position.set(0, 50, 100);
            
            const canvas = document.querySelector('#c');
            renderer = new THREE.WebGLRenderer({canvas});
            //renderer.physicallyCorrectLights = true;

            cameraControl = new CameraControl(camera, 0, 0, 0)
            cameraControl.update();

            addKeyboardHandlers();


            {
                const geometry = new THREE.BoxGeometry(10, 10, 10);
                const mat = new THREE.MeshBasicMaterial({color: 'blue'});

                const mesh = new THREE.Mesh(geometry, mat);
                mesh.position.set(0,0,0);
                scene.add(mesh);
            }


            //draw x,y,z axes
            const axesHelper = new THREE.AxesHelper( 5 );
            scene.add( axesHelper );

            requestAnimationFrame(animate);
        }

        main();
    </script>
    <style>
        html, body {
           margin: 0;
           height: 100%;
        }
        #c {
           width: 100%;
           height: 100%;
           display: block;
        }
    </style>
</html>